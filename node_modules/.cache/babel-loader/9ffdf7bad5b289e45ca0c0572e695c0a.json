{"ast":null,"code":"import _objectSpread from \"/Users/Greg/Desktop/react/summer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/Greg/Desktop/react/summer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/Users/Greg/Desktop/react/summer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Greg/Desktop/react/summer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Greg/Desktop/react/summer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Greg/Desktop/react/summer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Greg/Desktop/react/summer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Greg/Desktop/react/summer/src/components/dndDemo.jsx\";\nimport { Table, Card } from 'antd';\nimport { DragDropContext, DragSource, DropTarget } from 'react-dnd';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport update from 'immutability-helper';\nvar dragingIndex = -1;\n\nvar BodyRow =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BodyRow, _React$Component);\n\n  function BodyRow() {\n    _classCallCheck(this, BodyRow);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(BodyRow).apply(this, arguments));\n  }\n\n  _createClass(BodyRow, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isOver = _this$props.isOver,\n          connectDragSource = _this$props.connectDragSource,\n          connectDropTarget = _this$props.connectDropTarget,\n          moveRow = _this$props.moveRow,\n          restProps = _objectWithoutProperties(_this$props, [\"isOver\", \"connectDragSource\", \"connectDropTarget\", \"moveRow\"]);\n\n      var style = _objectSpread({}, restProps.style, {\n        cursor: 'move'\n      });\n\n      var className = restProps.className;\n\n      if (isOver) {\n        if (restProps.index > dragingIndex) {\n          className += ' drop-over-downward';\n        }\n\n        if (restProps.index < dragingIndex) {\n          className += ' drop-over-upward';\n        }\n      }\n\n      return connectDragSource(connectDropTarget(React.createElement(\"tr\", Object.assign({}, restProps, {\n        className: className,\n        style: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return BodyRow;\n}(React.Component);\n\nvar rowSource = {\n  beginDrag: function beginDrag(props) {\n    dragingIndex = props.index;\n    return {\n      index: props.index\n    };\n  }\n};\nvar rowTarget = {\n  drop: function drop(props, monitor) {\n    var dragIndex = monitor.getItem().index;\n    var hoverIndex = props.index; // Don't replace items with themselves\n\n    if (dragIndex === hoverIndex) {\n      return;\n    } // Time to actually perform the action\n\n\n    props.moveRow(dragIndex, hoverIndex); // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n\n    monitor.getItem().index = hoverIndex;\n  }\n};\nvar DragableBodyRow = DropTarget('row', rowTarget, function (connect, monitor) {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver()\n  };\n})(DragSource('row', rowSource, function (connect) {\n  return {\n    connectDragSource: connect.dragSource()\n  };\n})(BodyRow));\nvar columns = [{\n  title: 'Name',\n  dataIndex: 'name',\n  key: 'name'\n}, {\n  title: 'Age',\n  dataIndex: 'age',\n  key: 'age'\n}, {\n  title: 'Address',\n  dataIndex: 'address',\n  key: 'address'\n}];\n\nvar DragSortingTable =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(DragSortingTable, _React$Component2);\n\n  function DragSortingTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DragSortingTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DragSortingTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: [{\n        key: '1',\n        name: 'John Brown',\n        age: 32,\n        address: 'New York No. 1 Lake Park'\n      }, {\n        key: '2',\n        name: 'Jim Green',\n        age: 42,\n        address: 'London No. 1 Lake Park'\n      }, {\n        key: '3',\n        name: 'Joe Black',\n        age: 32,\n        address: 'Sidney No. 1 Lake Park'\n      }]\n    };\n    _this.components = {\n      body: {\n        row: DragableBodyRow\n      }\n    };\n\n    _this.moveRow = function (dragIndex, hoverIndex) {\n      var data = _this.state.data;\n      var dragRow = data[dragIndex];\n\n      _this.setState(update(_this.state, {\n        data: {\n          $splice: [[dragIndex, 1], [hoverIndex, 0, dragRow]]\n        }\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(DragSortingTable, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Table, {\n        columns: columns,\n        dataSource: this.state.data,\n        components: this.components,\n        onRow: function onRow(record, index) {\n          return {\n            index: index,\n            moveRow: _this2.moveRow\n          };\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return DragSortingTable;\n}(React.Component);\n\nvar Demo = DragDropContext(HTML5Backend)(DragSortingTable);\nexport default Demo;","map":{"version":3,"sources":["/Users/Greg/Desktop/react/summer/src/components/dndDemo.jsx"],"names":["Table","Card","DragDropContext","DragSource","DropTarget","HTML5Backend","update","dragingIndex","BodyRow","props","isOver","connectDragSource","connectDropTarget","moveRow","restProps","style","cursor","className","index","React","Component","rowSource","beginDrag","rowTarget","drop","monitor","dragIndex","getItem","hoverIndex","DragableBodyRow","connect","dropTarget","dragSource","columns","title","dataIndex","key","DragSortingTable","state","data","name","age","address","components","body","row","dragRow","setState","$splice","record","Demo"],"mappings":"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","sourcesContent":["import { Table, Card } from 'antd';\nimport { DragDropContext, DragSource, DropTarget } from 'react-dnd';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport update from 'immutability-helper';\n\nlet dragingIndex = -1;\n\nclass BodyRow extends React.Component {\n  render() {\n    const {\n      isOver,\n      connectDragSource,\n      connectDropTarget,\n      moveRow,\n      ...restProps\n    } = this.props;\n    const style = { ...restProps.style, cursor: 'move' };\n\n    let className = restProps.className;\n    if (isOver) {\n      if (restProps.index > dragingIndex) {\n        className += ' drop-over-downward';\n      }\n      if (restProps.index < dragingIndex) {\n        className += ' drop-over-upward';\n      }\n    }\n\n    return connectDragSource(\n      connectDropTarget(\n        <tr\n          {...restProps}\n          className={className}\n          style={style}\n        />\n      )\n    );\n  }\n}\n\nconst rowSource = {\n  beginDrag(props) {\n    dragingIndex = props.index;\n    return {\n      index: props.index,\n    };\n  },\n};\n\nconst rowTarget = {\n  drop(props, monitor) {\n    const dragIndex = monitor.getItem().index;\n    const hoverIndex = props.index;\n\n    // Don't replace items with themselves\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    // Time to actually perform the action\n    props.moveRow(dragIndex, hoverIndex);\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    monitor.getItem().index = hoverIndex;\n  },\n};\n\nconst DragableBodyRow = DropTarget(\n  'row',\n  rowTarget,\n  (connect, monitor) => ({\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n  }),\n)(\n  DragSource(\n    'row',\n    rowSource,\n    (connect) => ({\n      connectDragSource: connect.dragSource(),\n    }),\n  )(BodyRow),\n);\n\nconst columns = [{\n  title: 'Name',\n  dataIndex: 'name',\n  key: 'name',\n}, {\n  title: 'Age',\n  dataIndex: 'age',\n  key: 'age',\n}, {\n  title: 'Address',\n  dataIndex: 'address',\n  key: 'address',\n}];\n\nclass DragSortingTable extends React.Component {\n  state = {\n    data: [{\n      key: '1',\n      name: 'John Brown',\n      age: 32,\n      address: 'New York No. 1 Lake Park',\n    }, {\n      key: '2',\n      name: 'Jim Green',\n      age: 42,\n      address: 'London No. 1 Lake Park',\n    }, {\n      key: '3',\n      name: 'Joe Black',\n      age: 32,\n      address: 'Sidney No. 1 Lake Park',\n    }],\n  }\n\n  components = {\n    body: {\n      row: DragableBodyRow,\n    },\n  }\n\n  moveRow = (dragIndex, hoverIndex) => {\n    const { data } = this.state;\n    const dragRow = data[dragIndex];\n\n    this.setState(\n      update(this.state, {\n        data: {\n          $splice: [[dragIndex, 1], [hoverIndex, 0, dragRow]],\n        },\n      }),\n    );\n  }\n\n  render() {\n    return (\n\n      <Table\n        columns={columns}\n        dataSource={this.state.data}\n        components={this.components}\n        onRow={(record, index) => ({\n          index,\n          moveRow: this.moveRow,\n        })}\n      />\n    );\n  }\n}\n\nconst Demo = DragDropContext(HTML5Backend)(DragSortingTable);\n\nexport default Demo;\n"]},"metadata":{},"sourceType":"module"}