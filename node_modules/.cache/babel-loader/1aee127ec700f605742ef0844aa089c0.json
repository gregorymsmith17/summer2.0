{"ast":null,"code":"import _classCallCheck from \"/Users/Greg/Desktop/react/summer/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Greg/Desktop/react/summer/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Greg/Desktop/react/summer/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Greg/Desktop/react/summer/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Greg/Desktop/react/summer/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Greg/Desktop/react/summer/src/components/uploadDocument.jsx\";\nimport React, { Component } from 'react';\nimport { Link, Route } from 'react-router-dom';\nimport { Jumbotron, Grid, Table, Row, ButtonToolbar, MenuItem, DropdownButton, Col, Image, Button } from 'react-bootstrap';\nimport firebase from 'firebase';\nimport { fire } from '../fire';\nimport FileUploader from \"react-firebase-file-uploader\";\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { map } from 'lodash';\nimport { compose, withHandlers, setPropTypes } from 'recompose';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport Dropzone from 'react-dropzone';\nimport { TiArrowSortedDown, TiPencil, TiTrash, TiDownload } from \"react-icons/ti\";\n\nvar uploadDocument =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(uploadDocument, _Component);\n\n  function uploadDocument() {\n    var _this;\n\n    _classCallCheck(this, uploadDocument);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(uploadDocument).call(this));\n\n    _this.handleChangeUsername = function (event) {\n      return _this.setState({\n        username: event.target.value\n      });\n    };\n\n    _this.handleUploadStart = function () {\n      return _this.setState({\n        isUploading: true,\n        progress: 0\n      });\n    };\n\n    _this.handleProgress = function (progress) {\n      return _this.setState({\n        progress: progress\n      });\n    };\n\n    _this.handleUploadError = function (error) {\n      _this.setState({\n        isUploading: false\n      });\n\n      console.error(error);\n    };\n\n    _this.handleUploadSuccess = function (filename) {\n      _this.setState({\n        avatar: filename,\n        filename: filename,\n        progress: 100,\n        isUploading: false\n      });\n\n      firebase.storage().ref(_this.state.documentType).child(filename).getDownloadURL().then(function (url) {\n        return _this.setState({\n          avatarURL: url\n        });\n      });\n    };\n\n    _this.addPermit = function () {\n      _this.setState({\n        documentType: 'permit',\n        avatarURL: _this.state.avatarURL\n      });\n\n      console.log(_this.state.avatarURL);\n      _this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var samplesRef = fire.database().ref(\"permits/\".concat(user.uid));\n        var metaDataPermit = {\n          downloadLink: _this.state.avatarURL,\n          filename: _this.state.filename,\n          documentType: _this.state.documentType\n        };\n        samplesRef.push(metaDataPermit);\n      });\n    };\n\n    _this.addReport = function () {\n      _this.setState({\n        documentType: 'reports',\n        avatarURL: _this.state.avatarURL\n      });\n\n      console.log(_this.state.avatarURL);\n      _this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var samplesRef = fire.database().ref(\"reports/\".concat(user.uid));\n        var metaDataReport = {\n          downloadLink: _this.state.avatarURL,\n          filename: _this.state.filename,\n          documentType: _this.state.documentType\n        };\n        samplesRef.push(metaDataReport);\n      });\n    };\n\n    _this.addDrawings = function () {\n      _this.setState({\n        documentType: 'drawings',\n        avatarURL: _this.state.avatarURL\n      });\n\n      console.log(_this.state.avatarURL);\n      _this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var samplesRef = fire.database().ref(\"drawings/\".concat(user.uid));\n        var metaDataDrawings = {\n          downloadLink: _this.state.avatarURL,\n          filename: _this.state.filename,\n          documentType: _this.state.documentType\n        };\n        samplesRef.push(metaDataDrawings);\n      });\n    };\n\n    _this.addEquipmentManual = function () {\n      _this.setState({\n        avatarURL: _this.state.avatarURL\n      });\n\n      console.log(_this.state.avatarURL);\n      _this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var samplesRef = fire.database().ref(\"equipmentManual/\".concat(user.uid));\n        var metaDataEquipmentManual = {\n          downloadLink: _this.state.avatarURL,\n          filename: _this.state.filename,\n          documentType: _this.state.documentType\n        };\n        samplesRef.push(metaDataEquipmentManual);\n      });\n    };\n\n    _this.onDrag = function (event) {\n      event.preventDefault();\n    };\n\n    _this.onDrop = function (event) {\n      event.preventDefault();\n      var file = event.dataTransfer.files[0];\n      var storageRef = firebase.storage().ref();\n\n      _this.setState({\n        file: file\n      });\n    };\n\n    _this.state = {\n      username: \"\",\n      avatar: \"\",\n      isUploading: false,\n      progress: 0,\n      avatarURL: \"\",\n      userID: \"\",\n      filename: \"\",\n      orders: [],\n      reports: [],\n      drawings: [],\n      documentType: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(uploadDocument, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var samplesRef = fire.database().ref(\"permits/\".concat(user.uid));\n        samplesRef.on('value', function (snapshot) {\n          var orders = snapshot.val();\n          console.log(orders);\n          var newState = [];\n\n          for (var order in orders) {\n            newState.push({\n              id: order,\n              downloadLink: orders[order].downloadLink,\n              filename: orders[order].filename\n            });\n          }\n\n          _this2.setState({\n            orders: newState\n          });\n        });\n      });\n      this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var samplesRef = fire.database().ref(\"reports/\".concat(user.uid));\n        samplesRef.on('value', function (snapshot) {\n          var reports = snapshot.val();\n          console.log(reports);\n          var newState = [];\n\n          for (var report in reports) {\n            newState.push({\n              id: report,\n              downloadLink: reports[report].downloadLink,\n              filename: reports[report].filename\n            });\n          }\n\n          _this2.setState({\n            reports: newState\n          });\n        });\n      });\n      this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var samplesRef = fire.database().ref(\"drawings/\".concat(user.uid));\n        samplesRef.on('value', function (snapshot) {\n          var drawings = snapshot.val();\n          console.log(drawings);\n          var newState = [];\n\n          for (var drawing in drawings) {\n            newState.push({\n              id: drawing,\n              downloadLink: drawings[drawing].downloadLink,\n              filename: drawings[drawing].filename\n            });\n          }\n\n          _this2.setState({\n            drawings: newState\n          });\n        });\n      });\n    }\n  }, {\n    key: \"removesample\",\n    value: function removesample(itemId) {\n      this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var sampleRef = fire.database().ref(\"/permits/\".concat(user.uid, \"/\").concat(itemId));\n        sampleRef.remove();\n      });\n    }\n  }, {\n    key: \"removeReport\",\n    value: function removeReport(itemId) {\n      this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var sampleRef = fire.database().ref(\"/reports/\".concat(user.uid, \"/\").concat(itemId));\n        sampleRef.remove();\n      });\n    }\n  }, {\n    key: \"removeDrawing\",\n    value: function removeDrawing(itemId) {\n      this.removeAuthListener = fire.auth().onAuthStateChanged(function (user) {\n        var sampleRef = fire.database().ref(\"/drawings/\".concat(user.uid, \"/\").concat(itemId));\n        sampleRef.remove();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"File Name:\"), this.state.isUploading && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"Progress: \", this.state.progress), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, this.state.filename), React.createElement(\"div\", {\n        style: {\n          height: 80,\n          width: 400,\n          border: '2px dashed black'\n        },\n        onDragOver: this.onDrag,\n        onDrop: this.onDrop,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Drop an image!\"), React.createElement(\"img\", {\n        src: this.state.blobUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Drop an image!\"), React.createElement(FileUploader, {\n        style: {\n          height: 80,\n          width: 400,\n          border: '2px dashed black'\n        },\n        name: \"avatar\",\n        filename: function filename(file) {\n          return file.name.split('.')[0];\n        },\n        storageRef: firebase.storage().ref(this.state.documentType),\n        onUploadStart: this.handleUploadStart,\n        onUploadError: this.handleUploadError,\n        onUploadSuccess: this.handleUploadSuccess,\n        onProgress: this.handleProgress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 8,\n        sm: 8,\n        md: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.addPermit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"Add Permit\"), React.createElement(\"button\", {\n        onClick: this.addReport,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \"Add Report\"), React.createElement(\"button\", {\n        onClick: this.addDrawings,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"Add Drawing\"), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, \"Permits\"), React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, this.state.orders.map(function (order) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, order.filename), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, React.createElement(TiDownload, {\n          size: 25,\n          onClick: function onClick() {\n            return window.open(order.downloadLink, \"_blank\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, \"Download Page\"))), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, React.createElement(TiTrash, {\n          size: 25,\n          onClick: function onClick() {\n            return _this3.removesample(order.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, \"Remove sample\"))));\n      })), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, \"Reports\"), React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, this.state.reports.map(function (report) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, report.filename), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, React.createElement(TiDownload, {\n          size: 25,\n          onClick: function onClick() {\n            return window.open(report.downloadLink, \"_blank\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, \"Download Page\"))), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }, React.createElement(TiTrash, {\n          size: 25,\n          onClick: function onClick() {\n            return _this3.removeReport(report.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }, \"Remove sample\"))));\n      })), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"Drawings\"), React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, this.state.drawings.map(function (drawing) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        }, drawing.filename), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, React.createElement(TiDownload, {\n          size: 25,\n          onClick: function onClick() {\n            return window.open(drawing.downloadLink, \"_blank\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, \"Download Page\"))), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }, React.createElement(TiTrash, {\n          size: 25,\n          onClick: function onClick() {\n            return _this3.removeDrawing(drawing.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        }, \"Remove sample\"))));\n      }))))));\n    }\n  }]);\n\n  return uploadDocument;\n}(Component);\n\nexport { uploadDocument as default };","map":{"version":3,"sources":["/Users/Greg/Desktop/react/summer/src/components/uploadDocument.jsx"],"names":["React","Component","Link","Route","Jumbotron","Grid","Table","Row","ButtonToolbar","MenuItem","DropdownButton","Col","Image","Button","firebase","fire","FileUploader","PropTypes","connect","map","compose","withHandlers","setPropTypes","firebaseConnect","Dropzone","TiArrowSortedDown","TiPencil","TiTrash","TiDownload","uploadDocument","handleChangeUsername","event","setState","username","target","value","handleUploadStart","isUploading","progress","handleProgress","handleUploadError","error","console","handleUploadSuccess","filename","avatar","storage","ref","state","documentType","child","getDownloadURL","then","url","avatarURL","addPermit","log","removeAuthListener","auth","onAuthStateChanged","user","samplesRef","database","uid","metaDataPermit","downloadLink","push","addReport","metaDataReport","addDrawings","metaDataDrawings","addEquipmentManual","metaDataEquipmentManual","onDrag","preventDefault","onDrop","file","dataTransfer","files","storageRef","userID","orders","reports","drawings","on","snapshot","val","newState","order","id","report","drawing","itemId","sampleRef","remove","height","width","border","blobUrl","name","split","window","open","removesample","removeReport","removeDrawing"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link, Route } from 'react-router-dom';\nimport { Jumbotron, Grid, Table, Row, ButtonToolbar, MenuItem, DropdownButton, Col, Image, Button } from 'react-bootstrap';\nimport firebase from 'firebase';\nimport { fire } from '../fire';\nimport FileUploader from \"react-firebase-file-uploader\";\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { map } from 'lodash';\nimport { compose, withHandlers, setPropTypes } from 'recompose';\nimport { firebaseConnect } from 'react-redux-firebase';\nimport Dropzone from 'react-dropzone';\nimport { TiArrowSortedDown, TiPencil, TiTrash, TiDownload } from \"react-icons/ti\";\n\n\n\n\n\n\n\nexport default class uploadDocument extends Component {\n\n  constructor() {\n      super();\n      this.state = {\n\n        username: \"\",\n        avatar: \"\",\n        isUploading: false,\n        progress: 0,\n        avatarURL: \"\",\n        userID: \"\",\n        filename: \"\",\n        orders: [],\n        reports: [],\n        drawings: [],\n\n        documentType: \"\",\n\n\n      }\n\n\n\n    }\n\n\n\n\n  handleChangeUsername = event =>\n    this.setState({ username: event.target.value });\n  handleUploadStart = () => this.setState({ isUploading: true, progress: 0 });\n  handleProgress = progress => this.setState({ progress });\n  handleUploadError = error => {\n    this.setState({ isUploading: false });\n    console.error(error);\n  };\n\n  handleUploadSuccess = filename => {\n    this.setState({ avatar: filename, filename: filename, progress: 100, isUploading: false });\n    firebase.storage().ref(this.state.documentType).child(filename).getDownloadURL().then(url => this.setState({ avatarURL: url }));\n  };\n\n  addPermit = () => {\n    this.setState({\n      documentType: 'permit',\n      avatarURL: this.state.avatarURL,\n     });\n     console.log(this.state.avatarURL);\n     this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n     const samplesRef = fire.database().ref(`permits/${user.uid}`);\n     const metaDataPermit = {\n       downloadLink: this.state.avatarURL,\n       filename: this.state.filename,\n       documentType: this.state.documentType\n     }\n     samplesRef.push(metaDataPermit);\n     });\n  }\n  addReport = () => {\n    this.setState({\n      documentType: 'reports',\n      avatarURL: this.state.avatarURL,\n     });\n     console.log(this.state.avatarURL);\n     this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n     const samplesRef = fire.database().ref(`reports/${user.uid}`);\n     const metaDataReport = {\n       downloadLink: this.state.avatarURL,\n       filename: this.state.filename,\n       documentType: this.state.documentType\n     }\n     samplesRef.push(metaDataReport);\n     });\n  }\n  addDrawings = () => {\n    this.setState({\n      documentType: 'drawings',\n      avatarURL: this.state.avatarURL,\n     });\n     console.log(this.state.avatarURL);\n     this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n     const samplesRef = fire.database().ref(`drawings/${user.uid}`);\n     const metaDataDrawings = {\n       downloadLink: this.state.avatarURL,\n       filename: this.state.filename,\n       documentType: this.state.documentType\n     }\n     samplesRef.push(metaDataDrawings);\n     });\n  }\n  addEquipmentManual = () => {\n    this.setState({\n      avatarURL: this.state.avatarURL,\n     });\n     console.log(this.state.avatarURL);\n     this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n     const samplesRef = fire.database().ref(`equipmentManual/${user.uid}`);\n     const metaDataEquipmentManual = {\n       downloadLink: this.state.avatarURL,\n       filename: this.state.filename,\n       documentType: this.state.documentType\n     }\n     samplesRef.push(metaDataEquipmentManual);\n     });\n  }\n\n  componentDidMount() {\n\n    this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n      const samplesRef = fire.database().ref(`permits/${user.uid}`);\n      samplesRef.on('value', (snapshot) => {\n      let orders = snapshot.val();\n      console.log(orders);\n      let newState = [];\n      for (let order in orders) {\n        newState.push({\n          id: order,\n          downloadLink: orders[order].downloadLink,\n          filename: orders[order].filename,\n        });\n      }\n      this.setState({\n        orders: newState,\n      });\n    });\n  });\n  this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n    const samplesRef = fire.database().ref(`reports/${user.uid}`);\n    samplesRef.on('value', (snapshot) => {\n    let reports = snapshot.val();\n    console.log(reports);\n    let newState = [];\n    for (let report in reports) {\n      newState.push({\n        id: report,\n        downloadLink: reports[report].downloadLink,\n        filename: reports[report].filename,\n      });\n    }\n    this.setState({\n      reports: newState,\n    });\n  });\n});\n\nthis.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n  const samplesRef = fire.database().ref(`drawings/${user.uid}`);\n  samplesRef.on('value', (snapshot) => {\n  let drawings = snapshot.val();\n  console.log(drawings);\n  let newState = [];\n  for (let drawing in drawings) {\n    newState.push({\n      id: drawing,\n      downloadLink: drawings[drawing].downloadLink,\n      filename: drawings[drawing].filename,\n    });\n  }\n  this.setState({\n    drawings: newState,\n  });\n});\n});\n\n\n  }\n\n\n\n  removesample(itemId) {\n    this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n    const sampleRef = fire.database().ref(`/permits/${user.uid}/${itemId}`);\n    sampleRef.remove();\n  });\n  }\n  removeReport(itemId) {\n    this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n    const sampleRef = fire.database().ref(`/reports/${user.uid}/${itemId}`);\n    sampleRef.remove();\n  });\n  }\n  removeDrawing(itemId) {\n    this.removeAuthListener = fire.auth().onAuthStateChanged(user=>{\n    const sampleRef = fire.database().ref(`/drawings/${user.uid}/${itemId}`);\n    sampleRef.remove();\n  });\n  }\n\n  onDrag = event => {\n    event.preventDefault()\n  }\n\n  onDrop = event => {\n    event.preventDefault()\n    let file = event.dataTransfer.files[0]\n    let storageRef = firebase.storage().ref()\n    this.setState({ file })\n\n  }\n\n\n\n\n\n\n\n  render() {\n    return (\n      <div>\n        <Grid >\n          <Row>\n        <form>\n\n\n        <label>File Name:</label>\n          {this.state.isUploading && <p>Progress: {this.state.progress}</p>}\n          <h3>{this.state.filename}</h3>\n\n            <div style={{ height: 80, width: 400, border: '2px dashed black'}} onDragOver={this.onDrag} onDrop={this.onDrop}>\n          <p>Drop an image!</p>\n          <img src={this.state.blobUrl} />\n        </div>\n\n\n\n\n\n            <div ><p>Drop an image!</p>\n            <FileUploader style={{ height: 80, width: 400, border: '2px dashed black'}}\n              name=\"avatar\"\n              filename={file => file.name.split('.')[0] }\n              storageRef={firebase.storage().ref(this.state.documentType)}\n              onUploadStart={this.handleUploadStart}\n              onUploadError={this.handleUploadError}\n              onUploadSuccess={this.handleUploadSuccess}\n              onProgress={this.handleProgress}\n            />\n          </div>\n\n\n\n        </form>\n        </Row>\n        <Row>\n          <Col xs={8} sm={8} md={8}>\n\n\n        <button onClick={this.addPermit}>Add Permit</button>\n        <button onClick={this.addReport}>Add Report</button>\n        <button onClick={this.addDrawings}>Add Drawing</button>\n\n\n\n          <h2>Permits</h2>\n      <Table>\n          {this.state.orders.map((order) => {\n\n            return (\n              <tr>\n                  <td>{order.filename}</td>\n                  <td><TiDownload size={25} onClick={()=> window.open(order.downloadLink, \"_blank\")}><p>Download Page</p></TiDownload></td>\n                  <td><TiTrash size={25} onClick={() => this.removesample(order.id)}><p>Remove sample</p></TiTrash></td>\n                  </tr>\n            )\n          })}\n          </Table>\n          <h2>Reports</h2>\n      <Table>\n          {this.state.reports.map((report) => {\n\n            return (\n              <tr>\n                  <td>{report.filename}</td>\n                  <td><TiDownload size={25} onClick={()=> window.open(report.downloadLink, \"_blank\")}><p>Download Page</p></TiDownload></td>\n                  <td><TiTrash size={25} onClick={() => this.removeReport(report.id)}><p>Remove sample</p></TiTrash></td>\n                  </tr>\n            )\n          })}\n          </Table>\n          <h2>Drawings</h2>\n      <Table>\n          {this.state.drawings.map((drawing) => {\n\n            return (\n              <tr>\n                  <td>{drawing.filename}</td>\n                  <td><TiDownload size={25} onClick={()=> window.open(drawing.downloadLink, \"_blank\")}><p>Download Page</p></TiDownload></td>\n                  <td><TiTrash size={25} onClick={() => this.removeDrawing(drawing.id)}><p>Remove sample</p></TiTrash></td>\n                  </tr>\n            )\n          })}\n          </Table>\n        </Col>\n          </Row>\n          </Grid>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}