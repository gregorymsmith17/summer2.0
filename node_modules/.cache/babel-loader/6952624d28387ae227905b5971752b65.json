{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _fetchJsonp = require('fetch-jsonp');\n\nvar _fetchJsonp2 = _interopRequireDefault(_fetchJsonp);\n\nvar _isomorphicFetch = require('isomorphic-fetch');\n\nvar _isomorphicFetch2 = _interopRequireDefault(_isomorphicFetch);\n\nvar _queryString = require('query-string');\n\nvar _queryString2 = _interopRequireDefault(_queryString);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar DarkSkySkeleton = function () {\n  function DarkSkySkeleton(apiKey, proxy) {\n    _classCallCheck(this, DarkSkySkeleton);\n\n    this.proxy = proxy || '';\n    this.apiKey = apiKey || '';\n    this._longitude = null;\n    this._latitude = null;\n    this._time = null;\n    this.query = {};\n  }\n\n  _createClass(DarkSkySkeleton, [{\n    key: 'longitude',\n    value: function longitude(long) {\n      !long ? null : this._longitude = long;\n      return this;\n    }\n  }, {\n    key: 'latitude',\n    value: function latitude(lat) {\n      !lat ? null : this._latitude = lat;\n      return this;\n    }\n    /**\r\n     * @param {string} time - 'YYYY-MM-DDTHH:mm:ss'\r\n     */\n\n  }, {\n    key: 'time',\n    value: function time(_time) {\n      this._time = _time;\n      return this;\n    }\n  }, {\n    key: 'units',\n    value: function units(unit) {\n      !unit ? null : this.query.units = unit;\n      return this;\n    }\n  }, {\n    key: 'language',\n    value: function language(lang) {\n      !lang ? null : this.query.lang = lang;\n      return this;\n    }\n  }, {\n    key: 'exclude',\n    value: function exclude(blocks) {\n      this.query.exclude = blocks;\n      return this;\n    } // not on currently requests\n\n  }, {\n    key: 'extendHourly',\n    value: function extendHourly(param) {\n      if (!!param) {\n        this.query.extend = 'hourly';\n      } else {\n        if (this.query.hasOwnProperty('extend')) {\n          delete this.query.extend;\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: 'generateReqUrl',\n    value: function generateReqUrl() {\n      var baseUrl = this.proxy && this.proxy !== true ? this.proxy : 'https://api.darksky.net/forecast/' + this.apiKey;\n      this.url = baseUrl + '/' + this._latitude + ',' + this._longitude;\n      this._time ? this.url += ',' + this._time : this.url;\n      !this.isEmpty(this.query) ? this.url += '?' + _queryString2.default.stringify(this.query) : this.url;\n    }\n  }, {\n    key: 'get',\n    value: function get() {\n      if (!this._latitude || !this._longitude) {\n        return new Promise(function (resolve, reject) {\n          reject('Request not sent. ERROR: Longitute or Latitude is missing.');\n        });\n      }\n\n      this.generateReqUrl();\n      var query = this.proxy ? (0, _isomorphicFetch2.default)(this.url) : (0, _fetchJsonp2.default)(this.url);\n      return query.then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        return json;\n      }).catch(function (ex) {\n        return ex;\n      });\n    }\n  }, {\n    key: 'isEmpty',\n    value: function isEmpty(obj) {\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }]);\n\n  return DarkSkySkeleton;\n}();\n\nexports.default = DarkSkySkeleton;\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}